<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NFC-Restricted Daily Inspiration</title>
    <link rel="stylesheet" href="styles.css">
    <script src="quotes.js" defer></script>
    <script>
        document.addEventListener("DOMContentLoaded", function () {
            // Check URL for NFC path
            const path = window.location.pathname;
            
            if (path !== "/nfc-access") {
                // Restrict access
                document.body.innerHTML = `
                    <div class="restricted">
                        <h1>Access Denied</h1>
                        <p>This page is only accessible via an UpBand.</p>
                    </div>
                `;
                return;
            }

            // Functions to display inspiration content
            const getInspiration = (type) => {
                const today = new Date();
                const dayMonth = `${today.getMonth() + 1}-${today.getDate()}`;
                if (type === 'quotes') {
                    return dailyQuotes[dayMonth] || { quote: "Make every day count!", author: "Unknown" };
                } else if (type === 'bibleVerses') {
                    return dailyBibleVerses[dayMonth] || { verse: "Trust in the Lord with all your heart.", reference: "Proverbs 3:5" };
                } else if (type === 'affirmations') {
                    return dailyAffirmations[dayMonth] || { affirmation: "You are enough." };
                }
            };

            const displayInspiration = () => {
                const contentType = document.getElementById('contentType').value;
                localStorage.setItem('contentType', contentType); // Save preference
                const inspirationData = getInspiration(contentType);

                if (contentType === 'quotes') {
                    document.getElementById('content').textContent = `"${inspirationData.quote}"`;
                    document.getElementById('source').textContent = `- ${inspirationData.author}`;
                } else if (contentType === 'bibleVerses') {
                    document.getElementById('content').textContent = `"${inspirationData.verse}"`;
                    document.getElementById('source').textContent = `- ${inspirationData.reference}`;
                } else if (contentType === 'affirmations') {
                    document.getElementById('content').textContent = `"${inspirationData.affirmation}"`;
                    document.getElementById('source').textContent = ""; // No author for affirmations
                }
            };

            const displayDate = () => {
                const today = new Date();
                const options = { year: 'numeric', month: 'long', day: 'numeric' };
                document.getElementById('date').textContent = `Today is: ${today.toLocaleDateString(undefined, options)}`;
            };

            const startCountdown = () => {
                const now = new Date();
                const nextQuoteTime = new Date(now.getFullYear(), now.getMonth(), now.getDate() + 1, 0, 0, 0); 

                const updateCountdown = () => {
                    const now = new Date();
                    const timeLeft = nextQuoteTime - now;

                    if (timeLeft < 0) {
                        clearInterval(timerInterval);
                        document.getElementById('hours').textContent = "00";
                        document.getElementById('minutes').textContent = "00";
                        document.getElementById('seconds').textContent = "00";
                        return;
                    }

                    const hours = String(Math.floor((timeLeft % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60))).padStart(2, '0');
                    const minutes = String(Math.floor((timeLeft % (1000 * 60 * 60)) / (1000 * 60))).padStart(2, '0');
                    const seconds = String(Math.floor((timeLeft % (1000 * 60)) / 1000)).padStart(2, '0');

                    document.getElementById('hours').textContent = hours;
                    document.getElementById('minutes').textContent = minutes;
                    document.getElementById('seconds').textContent = seconds;
                };

                updateCountdown();
                const timerInterval = setInterval(updateCountdown, 1000);
            };

            // Initialize content
            const savedContentType = localStorage.getItem('contentType') || 'quotes'; // Default to 'quotes'
            document.getElementById('contentType').value = savedContentType;

            displayDate();
            displayInspiration();
            startCountdown();

            document.getElementById('contentType').addEventListener('change', displayInspiration);
        });
    </script>
</head>
<body>
    <div class="clouds">
        <div class="cloud cloud1"></div>
        <div class="cloud cloud2"></div>
        <div class="cloud cloud3"></div>
    </div>

    <div class="container">
        <h1>Daily Inspiration</h1>
        <select id="contentType">
            <option value="quotes">Quotes</option>
            <option value="bibleVerses">Bible Verses</option>
            <option value="affirmations">Affirmations</option>
        </select>
        <p id="date"></p>
        <p id="content"></p>
        <p id="source"></p>
        <div id="countdown">
            <div class="timer-box" id="hours">00</div>
            <div class="timer-box" id="minutes">00</div>
            <div class="timer-box" id="seconds">00</div>
        </div>
    </div>
</body>
</html>
